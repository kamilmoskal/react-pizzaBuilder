{"version":3,"sources":["containers/Orders/Orders.module.scss","components/Order/Order.module.scss","components/Order/Order.js","containers/Orders/Orders.js"],"names":["module","exports","Orders","Order","title","buyer","ingLabel","_ref","order","deleteOrder","console","log","arrayOfIng","key","ingredients","push","type","amount","filter","ing","react_default","a","createElement","Fragment","className","classes","totalPrice","orderData","name","street","phone","deliveryMethod","length","map","Button","btnType","clicked","connect","state","orders","loading","isAuth","auth","token","userId","dispatch","onFetchOrders","actions","onDeleteOrder","id","withErrorHandler","props","useEffect","Spinner","components_Order_Order","style","textAlign","axios"],"mappings":"6EACAA,EAAAC,QAAA,CAAkBC,OAAA,6CCAlBF,EAAAC,QAAA,CAAkBE,MAAA,qBAAAC,MAAA,qBAAAC,MAAA,qBAAAC,SAAA,kJCmCHH,EAhCD,SAAAI,GAA0B,IAAxBC,EAAwBD,EAAxBC,MAAOC,EAAiBF,EAAjBE,YACrBC,QAAQC,IAAIH,GACV,IAAII,EAAa,GACjB,IAAK,IAAIC,KAAOL,EAAMM,YACpBF,EAAWG,KAAK,CACZC,KAAMH,EACNI,OAAQT,EAAMM,YAAYD,GAAKI,SAIvC,OADEL,EAAaA,EAAWM,OAAO,SAAAC,GAAG,OAAmB,IAAfA,EAAIF,SAE1CG,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAAA,OAAKE,UAAWC,IAAQtB,OACpBiB,EAAAC,EAAAC,cAAA,MAAIE,UAAWC,IAAQrB,OAAvB,WAAuCI,EAAMkB,YAC7CN,EAAAC,EAAAC,cAAA,KAAGE,UAAWC,IAAQpB,OAAtB,gBACgBG,EAAMmB,UAAUC,KADhC,aAEWpB,EAAMmB,UAAUE,OAF3B,YAGUrB,EAAMmB,UAAUG,MAH1B,eAIatB,EAAMmB,UAAUI,gBAG5BnB,EAAWoB,OAAS,EACnBpB,EAAWqB,IAAI,SAAAd,GACf,OAAOC,EAAAC,EAAAC,cAAA,KAAGT,IAAKM,EAAIH,KAAMQ,UAAWC,IAAQnB,UAAWa,EAAIH,KAApD,MAA6DG,EAAIF,OAAjE,QAEPG,EAAAC,EAAAC,cAAA,mDAENF,EAAAC,EAAAC,cAACY,EAAA,EAAD,CAAQC,QAAQ,SAASC,QAAS3B,GAAlC,0CCyBS4B,sBAhBS,SAAAC,GACpB,MAAO,CACLC,OAAQD,EAAM9B,MAAM+B,OACpBC,QAASF,EAAM9B,MAAMgC,QACrBC,OAA6B,OAArBH,EAAMI,KAAKC,MACnBA,MAAOL,EAAMI,KAAKC,MAClBC,OAAQN,EAAMI,KAAKE,SAGI,SAAAC,GACzB,MAAO,CACHC,cAAe,SAACH,EAAOC,GAAR,OAAmBC,EAASE,IAAoBJ,EAAOC,KACtEI,cAAe,SAACL,EAAOM,GAAR,OAAeJ,EAASE,IAAoBJ,EAAOM,OAI3DZ,CAA6Ca,YA/C7C,SAAAC,GAOX,GANAC,oBAAU,WACFD,EAAMV,QACNU,EAAML,cAAcK,EAAMR,MAAOQ,EAAMP,SAE5C,IAECO,EAAMX,QACN,OAAOpB,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,MAEX,IAAId,EAASY,EAAMZ,OAAOP,OAASmB,EAAMZ,OAAON,IAAI,SAAAzB,GAChD,OACIY,EAAAC,EAAAC,cAACgC,EAAD,CACIzC,IAAKL,EAAMyC,GACXzC,MAAOA,EACPC,YAAa,kBAAM0C,EAAMH,cAAcG,EAAMR,MAAOnC,EAAMyC,SAGjE7B,EAAAC,EAAAC,cAAA,MAAIiC,MAAO,CAACC,UAAW,WAAvB,oBAEL,OACIpC,EAAAC,EAAAC,cAAA,OAAKE,UAAWC,IAAQvB,QAEnBiD,EAAMV,OACPF,EACEnB,EAAAC,EAAAC,cAAA,MAAIiC,MAAO,CAACC,UAAW,WAAvB,2BAsBuEC","file":"static/js/6.49bab435.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Orders\":\"Orders_Orders__XYnfg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Order\":\"Order_Order__YRFst\",\"title\":\"Order_title__2V2hp\",\"buyer\":\"Order_buyer__1CRGd\",\"ingLabel\":\"Order_ingLabel__1Xw4j\"};","import React from 'react';\r\nimport classes from './Order.module.scss';\r\nimport Button from '../UI/Button/Button';\r\n\r\nconst Order = ({order, deleteOrder}) => {\r\n  console.log(order)\r\n    let arrayOfIng = []\r\n    for (let key in order.ingredients){\r\n      arrayOfIng.push({\r\n          type: key,\r\n          amount: order.ingredients[key].amount\r\n      })\r\n    }\r\n    arrayOfIng = arrayOfIng.filter(ing => ing.amount !== 0)\r\n  return (\r\n    <React.Fragment>\r\n      <div className={classes.Order}>\r\n          <h2 className={classes.title}>Pizza: ${order.totalPrice}</h2>\r\n          <p className={classes.buyer}>\r\n            order: name: {order.orderData.name}, \r\n            street: {order.orderData.street},  \r\n            phone: {order.orderData.phone}, \r\n            delivery: {order.orderData.deliveryMethod}\r\n          </p>\r\n\r\n          {arrayOfIng.length > 0 ? \r\n            arrayOfIng.map(ing => {\r\n            return <p key={ing.type} className={classes.ingLabel}>{ing.type} : {ing.amount} g</p>\r\n            }) \r\n          : <p>Basic pizza with no extra ingredients</p>}\r\n      </div>\r\n      <Button btnType=\"Danger\" clicked={deleteOrder}>Cancel Order</Button>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Order\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classes from './Orders.module.scss';\r\nimport * as actions from '../../store/actions/index';\r\nimport Order from '../../components/Order/Order';\r\nimport Spinner from '../../components/UI/Spinner/Spinner';\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport axios from '../../axios-db';\r\n\r\nconst Orders = props => {\r\n    useEffect(() => {\r\n        if (props.isAuth) {\r\n            props.onFetchOrders(props.token, props.userId);\r\n        }\r\n    }, [])\r\n    \r\n    if (props.loading){\r\n        return <Spinner />\r\n    } \r\n    let orders = props.orders.length ? props.orders.map(order => {\r\n        return (\r\n            <Order \r\n                key={order.id} \r\n                order={order}\r\n                deleteOrder={() => props.onDeleteOrder(props.token, order.id)}\r\n            />\r\n        )\r\n    }) : <h3 style={{textAlign: 'center'}}>No active orders</h3>\r\n\r\n    return (\r\n        <div className={classes.Orders}>\r\n\r\n            {props.isAuth ? \r\n            orders \r\n            : <h3 style={{textAlign: 'center'}}>Log in to view orders</h3>}\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n      orders: state.order.orders,\r\n      loading: state.order.loading,\r\n      isAuth: state.auth.token !== null,\r\n      token: state.auth.token,\r\n      userId: state.auth.userId\r\n    }\r\n  }\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n        onFetchOrders: (token, userId) => dispatch(actions.fetchOrders(token, userId)),\r\n        onDeleteOrder: (token, id) => dispatch(actions.deleteOrder(token, id)),\r\n    }\r\n  }\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(Orders, axios));\r\n"],"sourceRoot":""}