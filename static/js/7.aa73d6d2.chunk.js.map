{"version":3,"sources":["components/UI/Modal/Modal.module.scss","components/UI/Modal/Modal.js","hoc/withErrorHandler/withErrorHandler.js","containers/Orders/Orders.module.scss","components/Order/Order.module.scss","components/Order/Order.js","containers/Orders/Orders.js","components/UI/Button/Button.js","components/UI/Button/Button.module.scss"],"names":["module","exports","Modal","Success","Error","props","react_default","a","createElement","className","classes","modalType","join","children","__webpack_exports__","WrappedComponent","axios","_Component","withErrorhandler","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","reqInteceptor","interceptors","request","use","req","setState","error","resInteceptor","response","res","setTimeout","state","inherits","createClass","key","value","eject","Fragment","UI_Modal_Modal","Component","Orders","Order","title","buyer","ingLabel","_ref","order","deleteOrder","console","log","arrayOfIng","ingredients","push","type","amount","filter","ing","totalPrice","orderData","name","street","phone","deliveryMethod","length","map","Button","btnType","clicked","connect","orders","loading","isAuth","auth","token","userId","dispatch","onFetchOrders","actions","onDeleteOrder","id","withErrorHandler","useEffect","Spinner","components_Order_Order","style","textAlign","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_Button_module_scss__WEBPACK_IMPORTED_MODULE_1__","_Button_module_scss__WEBPACK_IMPORTED_MODULE_1___default","React","memo","onClick","disabled","Primary","Danger"],"mappings":"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","file":"static/js/7.aa73d6d2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Modal_Modal__1sqFf\",\"Success\":\"Modal_Success__3vdL2\",\"Error\":\"Modal_Error__3-DGc\"};","import React from 'react';\r\nimport classes from './Modal.module.scss';\r\n\r\nconst Modal = (props) => {\r\n    return (\r\n        <div className={[classes.Modal, classes[props.modalType]].join(' ')}>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport Modal from '../../components/UI/Modal/Modal';\r\n\r\nexport default (WrappedComponent, axios) => {\r\n  return class withErrorhandler extends Component {\r\n        constructor(props){\r\n            super(props);\r\n\r\n            this.reqInteceptor = axios.interceptors.request.use(req => {\r\n                this.setState({error: false});\r\n                return req;\r\n            });\r\n            this.resInteceptor = axios.interceptors.response.use(res => res, error => {\r\n                this.setState({error: true}, () => {\r\n                    setTimeout(() => {\r\n                        this.setState({error: false})\r\n                    }, 2000);\r\n                });\r\n            });\r\n\r\n            this.state = {\r\n                error: false\r\n            }\r\n        }\r\n        componentWillUnmount(){\r\n            axios.interceptors.request.eject(this.reqInteceptor);\r\n            axios.interceptors.response.eject(this.resInteceptor);\r\n        }\r\n        render(){\r\n            return (\r\n                <React.Fragment>\r\n                    {this.state.error ? <Modal modalType=\"Error\">Failed to connect to server. Try again later</Modal> : null}\r\n                    <WrappedComponent {...this.props}/>\r\n                </React.Fragment>\r\n            )\r\n        }\r\n    } \r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Orders\":\"Orders_Orders__XYnfg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Order\":\"Order_Order__YRFst\",\"title\":\"Order_title__2V2hp\",\"buyer\":\"Order_buyer__1CRGd\",\"ingLabel\":\"Order_ingLabel__1Xw4j\"};","import React from 'react';\r\nimport classes from './Order.module.scss';\r\nimport Button from '../UI/Button/Button';\r\n\r\nconst Order = ({order, deleteOrder}) => {\r\n  console.log(order)\r\n    let arrayOfIng = []\r\n    for (let key in order.ingredients){\r\n      arrayOfIng.push({\r\n          type: key,\r\n          amount: order.ingredients[key].amount\r\n      })\r\n    }\r\n    arrayOfIng = arrayOfIng.filter(ing => ing.amount !== 0)\r\n  return (\r\n    <React.Fragment>\r\n      <div className={classes.Order}>\r\n          <h2 className={classes.title}>Pizza: ${order.totalPrice}</h2>\r\n          <p className={classes.buyer}>\r\n            order: name: {order.orderData.name}, \r\n            street: {order.orderData.street},  \r\n            phone: {order.orderData.phone}, \r\n            delivery: {order.orderData.deliveryMethod}\r\n          </p>\r\n\r\n          {arrayOfIng.length > 0 ? \r\n            arrayOfIng.map(ing => {\r\n            return <p key={ing.type} className={classes.ingLabel}>{ing.type} : {ing.amount} g</p>\r\n            }) \r\n          : <p>Basic pizza with no extra ingredients</p>}\r\n      </div>\r\n      <Button btnType=\"Danger\" clicked={deleteOrder}>Cancel Order</Button>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Order\r\n","import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport classes from './Orders.module.scss';\r\nimport * as actions from '../../store/actions/index';\r\nimport Order from '../../components/Order/Order';\r\nimport Spinner from '../../components/UI/Spinner/Spinner';\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport axios from '../../axios-db';\r\n\r\nconst Orders = props => {\r\n    useEffect(() => {\r\n        if (props.isAuth) {\r\n            props.onFetchOrders(props.token, props.userId);\r\n        }\r\n    }, [])\r\n    \r\n    if (props.loading){\r\n        return <Spinner />\r\n    } \r\n    let orders = props.orders.length ? props.orders.map(order => {\r\n        return (\r\n            <Order \r\n                key={order.id} \r\n                order={order}\r\n                deleteOrder={() => props.onDeleteOrder(props.token, order.id)}\r\n            />\r\n        )\r\n    }) : <h3 style={{textAlign: 'center'}}>No active orders</h3>\r\n\r\n    return (\r\n        <div className={classes.Orders}>\r\n\r\n            {props.isAuth ? \r\n            orders \r\n            : <h3 style={{textAlign: 'center'}}>Log in to view orders</h3>}\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n      orders: state.order.orders,\r\n      loading: state.order.loading,\r\n      isAuth: state.auth.token !== null,\r\n      token: state.auth.token,\r\n      userId: state.auth.userId\r\n    }\r\n  }\r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n        onFetchOrders: (token, userId) => dispatch(actions.fetchOrders(token, userId)),\r\n        onDeleteOrder: (token, id) => dispatch(actions.deleteOrder(token, id)),\r\n    }\r\n  }\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(Orders, axios));\r\n","import React from 'react';\r\nimport classes from './Button.module.scss';\r\n\r\nconst Button = (props) => {\r\n    return <button \r\n                className={[classes.Button, classes[props.btnType]].join(' ')}\r\n                type='submit'\r\n                onClick={props.clicked}\r\n                disabled={props.disabled}>\r\n                {props.children}\r\n            </button>\r\n}\r\n\r\nexport default React.memo(Button);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2bIZO\",\"Primary\":\"Button_Primary__31ihf\",\"Danger\":\"Button_Danger__1MG8u\"};"],"sourceRoot":""}