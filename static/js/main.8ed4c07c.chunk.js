(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(e,t,n){"use strict";n.d(t,"l",function(){return r}),n.d(t,"k",function(){return a}),n.d(t,"e",function(){return o}),n.d(t,"n",function(){return i}),n.d(t,"m",function(){return c}),n.d(t,"p",function(){return u}),n.d(t,"q",function(){return l}),n.d(t,"o",function(){return s}),n.d(t,"i",function(){return d}),n.d(t,"j",function(){return m}),n.d(t,"h",function(){return f}),n.d(t,"g",function(){return p}),n.d(t,"f",function(){return g}),n.d(t,"c",function(){return E}),n.d(t,"d",function(){return v}),n.d(t,"a",function(){return h}),n.d(t,"b",function(){return _});var r="INIT_INGREDIENTS",a="INIT_INGREDIENTS_ERROR",o="CHANGE_INGREDIENT",i="RESET_INGREDIENTS",c="RANDOM_PIZZA",u="SUBMIT_ORDER_START",l="SUBMIT_ORDER_SUCCESS",s="SUBMIT_ORDER_ERROR",d="FETCH_ORDERS_START",m="FETCH_ORDERS_SUCCESS",f="FETCH_ORDERS_ERROR",p="DELETE_ORDERS_SUCCESS",g="DELETE_ORDERS_ERROR",E="AUTH_START",v="AUTH_SUCCESS",h="AUTH_ERROR",_="AUTH_LOGOUT"},,,,,,,,,,function(e,t,n){"use strict";var r=n(13),a=n(1),o=function(){return function(e,t){r.a.get("/ingredients.json").then(function(t){e({type:a.l,ingredients:t.data})}).catch(function(t){e({type:a.k,error:t})})}},i=function(e,t){return{type:a.e,value:e,ingType:t}},c=function(){return{type:a.n}},u=function(){return function(e){e(c()),e({type:a.m})}},l=n(2),s=function(e,t){return function(n){n({type:a.p}),r.a.post("/orders.json?auth="+e,t).then(function(e){return n({type:a.q})}).catch(function(e){return n({type:a.o,error:e})})}},d=function(e,t){return function(n){n({type:a.i}),r.a.get("/orders.json?auth="+e+'&orderBy="userId"&equalTo="'+t+'"').then(function(e){var t=[];for(var r in e.data)t.push(Object(l.a)({},e.data[r],{id:r}));n({type:a.j,orders:t})}).catch(function(e){return n({type:a.h,error:e})})}},m=function(e,t){return function(n){r.a.delete("/orders/"+t+".json?auth="+e).then(function(e){n({type:a.g,id:t})}).catch(function(e){return n({type:a.f,error:e})})}},f=n(29),p=n.n(f),g=function(e,t,n,r){return function(o){o({type:a.c});var i={email:e,password:t,returnSecureToken:!0},c="https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=AIzaSyAGeTjdqblz2Z5tDZ8eY4G7H2wtnTV0N9Q";n||(c="https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=AIzaSyAGeTjdqblz2Z5tDZ8eY4G7H2wtnTV0N9Q"),p.a.post(c,i).then(function(e){if(r){var t=new Date((new Date).getTime()+1e3*e.data.expiresIn);sessionStorage.setItem("token",e.data.idToken),sessionStorage.setItem("userId",e.data.localId),sessionStorage.setItem("expirationDate",t)}o({type:a.d,token:e.data.idToken,userId:e.data.localId}),o(v(e.data.expiresIn))}).catch(function(e){o({type:a.a,error:e.response.data.error})})}},E=function(){return sessionStorage.removeItem("token"),sessionStorage.removeItem("userId"),sessionStorage.removeItem("expirationDate"),{type:a.b}},v=function(e){return function(t){setTimeout(function(){t(E())},1e3*e)}},h=function(){return function(e){var t=sessionStorage.getItem("token");if(t){var n=sessionStorage.getItem("userId"),r=new Date(sessionStorage.getItem("expirationDate"));new Date<r?e({type:a.d,token:t,userId:n}):e(E())}}};n.d(t,"f",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"i",function(){return c}),n.d(t,"h",function(){return u}),n.d(t,"j",function(){return s}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return m}),n.d(t,"a",function(){return g}),n.d(t,"g",function(){return E}),n.d(t,"c",function(){return h})},,function(e,t,n){"use strict";var r=n(29),a=n.n(r).a.create({baseURL:"https://react-makingpizza.firebaseio.com/"});t.a=a},,,function(e,t,n){e.exports={OrderSummary:"OrderSummary_OrderSummary__2A4xL",ingredient:"OrderSummary_ingredient__32vQj",price:"OrderSummary_price__PIhx5"}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(64),i=n.n(o);t.a=function(){return a.a.createElement("div",{className:i.a.Spinner})}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(39),i=n.n(o);t.a=a.a.memo(function(e){return a.a.createElement("button",{className:[i.a.Button,i.a[e.btnType]].join(" "),type:"submit",onClick:e.clicked,disabled:e.disabled},e.children)})},,function(e,t,n){e.exports={Pizza:"Pizza_Pizza__FsJCW","fade-enter":"Pizza_fade-enter__2flpu","fade-enter-active":"Pizza_fade-enter-active__1D0ry","fade-exit":"Pizza_fade-exit__1l0OZ","fade-exit-active":"Pizza_fade-exit-active__dQaYC"}},,,function(e,t,n){e.exports={SideDrawer:"SideDrawer_SideDrawer__6EMQh",Open:"SideDrawer_Open__19zK1",Close:"SideDrawer_Close__3h6ul"}},function(e,t,n){e.exports={PizzaControls:"PizzaControls_PizzaControls__1vu-W",select:"PizzaControls_select__3ukg9",slider:"PizzaControls_slider__2a-eA",gramValue:"PizzaControls_gramValue__3ZzJF"}},,,,,,function(e,t,n){e.exports={NavigationItem:"NavigationItem_NavigationItem__1MwEt",active:"NavigationItem_active__34pUc"}},,,,,,function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__1GZfc",DesktopOnly:"Toolbar_DesktopOnly__3sCgd"}},,function(e,t,n){e.exports={Link:"Logo_Link__1VxRV",Logo:"Logo_Logo__2AGIc"}},function(e,t,n){e.exports={Button:"Button_Button__2bIZO",Primary:"Button_Primary__31ihf",Danger:"Button_Danger__1MG8u"}},function(e,t,n){e.exports={Modal:"Modal_Modal__1sqFf",Success:"Modal_Success__3vdL2",Error:"Modal_Error__3-DGc"}},,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/basic.96deab51.svg"},,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(34),i=n(20),c=n.n(i),u=n(41),l=n(17),s=a.a.memo(function(e){var t=e.type;console.log("PizzaIngredient");var r=Math.floor(10*Math.random())+10,o=Math.floor(55*Math.random())+15,i=Math.floor(55*Math.random())+15,c=Math.floor(360*Math.random()),s=Math.floor(10*Math.random()),d=a.a.createElement(u.a,{svgStyle:{width:"100%",height:"100%"},src:n(49)});return t&&(d=a.a.createElement(u.a,{svgStyle:{position:"absolute",width:"".concat(r,"%"),height:"".concat(r,"%"),top:"".concat(o,"%"),left:"".concat(i,"%"),transform:"rotate(".concat(c,"deg)"),zIndex:"".concat(s)},loading:function(){return a.a.createElement("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",zIndex:"20"}},a.a.createElement(l.a,null))},wrapper:"span",src:n(106)("./".concat(t,".svg"))})),d});t.a=function(e){var t=e.ingredients,n=[];for(var r in t)for(var i=0;i<Math.floor(t[r].amount/5);i++)n.push({id:r+i,type:r});var u=n.map(function(e){return a.a.createElement(o.CSSTransition,{key:e.id,classNames:{enter:c.a["fade-enter"],enterActive:c.a["fade-enter-active"],exit:c.a["fade-exit"],exitActive:c.a["fade-exit-active"]},timeout:300},a.a.createElement(s,{type:e.type}))});return a.a.createElement("div",{className:c.a.Pizza},a.a.createElement(s,null),a.a.createElement(o.TransitionGroup,null,u))}},function(e,t,n){"use strict";var r=n(65),a=n(66),o=n(69),i=n(67),c=n(70),u=n(0),l=n.n(u),s=n(40),d=n.n(s),m=function(e){return l.a.createElement("div",{className:[d.a.Modal,d.a[e.modalType]].join(" ")},e.children)};t.a=function(e,t){return function(n){function u(e){var n;return Object(r.a)(this,u),(n=Object(o.a)(this,Object(i.a)(u).call(this,e))).reqInteceptor=t.interceptors.request.use(function(e){return n.setState({error:!1}),e}),n.resInteceptor=t.interceptors.response.use(function(e){return e},function(e){n.setState({error:!0},function(){setTimeout(function(){n.setState({error:!1})},2e3)})}),n.state={error:!1},n}return Object(c.a)(u,n),Object(a.a)(u,[{key:"componentWillUnmount",value:function(){t.interceptors.request.eject(this.reqInteceptor),t.interceptors.response.eject(this.resInteceptor)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.state.error?l.a.createElement(m,{modalType:"Error"},"Failed to connect to server. Try again later"):null,l.a.createElement(e,this.props))}}]),u}(u.Component)}},,function(e,t,n){e.exports={BurgerToggle:"BurgerToggle_BurgerToggle__2sT92"}},function(e,t,n){e.exports={NavigationItems:"NavigationItems_NavigationItems__3JmOX"}},function(e,t,n){e.exports={MakingPizza:"MakingPizza_MakingPizza__dyjnB"}},,,,,function(e,t,n){e.exports={Spinner:"Spinner_Spinner__2lIk4",load4:"Spinner_load4__llAEN"}},,,,,,,,function(e,t,n){e.exports=n(123)},,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r={"./basic.svg":49,"./basil.svg":107,"./dough.svg":108,"./greenPepper.svg":109,"./mushrooms.svg":110,"./olives.svg":111,"./onion.svg":112,"./pineapple.svg":113,"./redPepper.svg":114,"./salami.svg":115};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=106},function(e,t,n){e.exports=n.p+"static/media/basil.186aab84.svg"},function(e,t,n){e.exports=n.p+"static/media/dough.f2f89bc3.svg"},function(e,t,n){e.exports=n.p+"static/media/greenPepper.61480653.svg"},function(e,t,n){e.exports=n.p+"static/media/mushrooms.a60c76e0.svg"},function(e,t,n){e.exports=n.p+"static/media/olives.466ae5e9.svg"},function(e,t,n){e.exports=n.p+"static/media/onion.df14f2c7.svg"},function(e,t,n){e.exports=n.p+"static/media/pineapple.0d1687bc.svg"},function(e,t,n){e.exports=n.p+"static/media/redPepper.04faaea7.svg"},function(e,t,n){e.exports=n.p+"static/media/salami.f7344463.svg"},,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(26),i=n.n(o),c=(n(77),n(10)),u=n(12),l=n(15),s=n(25),d=n(36),m=n.n(d),f=n(57),p=n.n(f),g=function(e){return a.a.createElement("div",{onClick:e.clicked,className:p.a.BurgerToggle},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null))},E=n(58),v=n.n(E),h=n(30),_=n.n(h),b=function(e){return a.a.createElement("li",{className:_.a.NavigationItem},a.a.createElement(u.c,{to:e.link,exact:e.exact,className:_.a.NavigationItem,activeClassName:_.a.active},e.children))},y=function(e){var t=e.isAuth;return a.a.createElement("ul",{className:v.a.NavigationItems},a.a.createElement(b,{link:"/",exact:!0},"Make Pizza"),a.a.createElement(b,{link:"/orders"},"Orders"),t?a.a.createElement(b,{link:"/logout"},"Logout"):a.a.createElement(b,{link:"/auth"},"Log In"))},O=n(38),S=n.n(O),I=function(){return a.a.createElement(u.b,{to:"/",className:S.a.Link},a.a.createElement("h1",{className:S.a.Logo},"makeYourPizza"))},k=function(e){return a.a.createElement("header",{className:m.a.Toolbar},a.a.createElement(I,null),a.a.createElement(g,{clicked:e.toggleSideDrawer}),a.a.createElement("nav",{className:m.a.DesktopOnly},a.a.createElement(y,{isAuth:e.isAuth})))},z=n(23),j=n.n(z),T=function(e){var t=[j.a.SideDrawer,j.a.Close];return e.open&&(t=[j.a.SideDrawer,j.a.Open]),a.a.createElement("div",{className:t.join(" ")},a.a.createElement("div",{style:{marginBottom:"40px"},onClick:e.closed},a.a.createElement(I,null)),a.a.createElement("nav",{onClick:e.closed},a.a.createElement(y,{isAuth:e.isAuth})))},N=Object(c.b)(function(e){return{isAuth:null!==e.auth.token}})(function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1],c=function(){i(!o)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(k,{toggleSideDrawer:c,isAuth:e.isAuth}),a.a.createElement(T,{open:o,closed:c,isAuth:e.isAuth}),a.a.createElement("main",null,e.children))}),x=n(59),P=n.n(x),R=n(11),D=n(54),w=n(16),C=n.n(w),A=n(18),M=Object(l.f)(function(e){var t=e.ingredients,n=[];for(var r in t)n.push({type:r,amount:t[r].amount,price:t[r].price});var o=n.filter(function(e){return 0!==e.amount}).map(function(e){return a.a.createElement("p",{key:e.type,className:C.a.ingredient},a.a.createElement("strong",null,e.type,":")," ",e.amount," g,",a.a.createElement("strong",null,"$",e.price.toFixed(2)))}),i=e.startedPrice;return n.forEach(function(e){return i+=e.price}),0===o.length&&(o=a.a.createElement("p",{style:{textAlign:"center"}},"ADD INGREDIENTS")),a.a.createElement("div",{className:C.a.OrderSummary},a.a.createElement("div",null,a.a.createElement("p",{className:C.a.ingredient},a.a.createElement("strong",null,"dought:")," 300 g,",a.a.createElement("strong",null,"$7")),a.a.createElement("p",{className:C.a.ingredient},a.a.createElement("strong",null,"cheese:")," 60 g,",a.a.createElement("strong",null,"$5")),a.a.createElement("p",{className:C.a.ingredient},a.a.createElement("strong",null,"tomato:")," 20 g,",a.a.createElement("strong",null,"$2")),o),a.a.createElement("div",null,a.a.createElement("p",{className:C.a.price},"total price: ",a.a.createElement("strong",{style:{fontSize:"20px"}},i.toFixed(2))),e.isAuth?a.a.createElement(A.a,{btnType:"Primary",clicked:function(){return e.history.push("/checkout")},disabled:!1},"Make a order"):a.a.createElement(A.a,{btnType:"Primary",clicked:function(){return e.history.push("/auth")},disabled:!1},"Log In to make a order")))}),L=n(24),U=n.n(L),B=function(e){var t=Object(r.useState)("onion"),n=Object(s.a)(t,2),o=n[0],i=n[1];return a.a.createElement("div",{className:U.a.PizzaControls},a.a.createElement("select",{className:U.a.select,value:o,onChange:function(e){i(e.target.value)}},a.a.createElement("option",{value:"onion"},"onion"),a.a.createElement("option",{value:"salami"},"salami"),a.a.createElement("option",{value:"mushrooms"},"mushrooms"),a.a.createElement("option",{value:"olives"},"olives"),a.a.createElement("option",{value:"basil"},"basil"),a.a.createElement("option",{value:"pineapple"},"pineapple"),a.a.createElement("option",{value:"redPepper"},"red pepper"),a.a.createElement("option",{value:"greenPepper"},"green pepper")),a.a.createElement("input",{type:"range",min:"0",max:"100",value:e.ingredients[o].amount,className:U.a.slider,onChange:function(t){return e.onChangeRange(t.target.value,o)}}),a.a.createElement("p",{className:U.a.gramValue},e.ingredients[o].amount," grams"),a.a.createElement(A.a,{btnType:"Primary",clicked:e.resetIng},"Reset"),a.a.createElement(A.a,{btnType:"Primary",clicked:e.randomPizza},"Make random Pizza"))},G=n(17),F=n(55),q=n(13),H=Object(c.b)(function(e){return{ingredients:e.mp.ingredients,startedPrice:e.mp.startedPrice,error:e.mp.error,isAuth:null!==e.auth.token}},function(e){return{onInitIngredients:function(){return e(R.f())},onChangeIngredient:function(t,n){return e(R.b(t,n))},onResetIngredients:function(){return e(R.i())},onRandomPizza:function(){return e(R.h())}}})(Object(F.a)(function(e){Object(r.useEffect)(function(){e.onInitIngredients()},[]);var t=e.error?a.a.createElement("p",null,"Something went wrong: ",e.error.message):a.a.createElement(G.a,null);return e.ingredients&&(t=a.a.createElement(a.a.Fragment,null,a.a.createElement(B,{onChangeRange:e.onChangeIngredient,ingredients:e.ingredients,resetIng:e.onResetIngredients,randomPizza:e.onRandomPizza}),a.a.createElement(D.a,{ingredients:e.ingredients}),a.a.createElement(M,{ingredients:e.ingredients,startedPrice:e.startedPrice,isAuth:e.isAuth}))),a.a.createElement("div",{className:P.a.MakingPizza},t)},q.a)),Z=Object(c.b)(null,function(e){return{onLogout:function(){return e(R.g())}}})(function(e){return Object(r.useEffect)(function(){e.onLogout()},[]),a.a.createElement(l.a,{to:"/"})}),V=a.a.lazy(function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,142))}),J=a.a.lazy(function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,140))}),Q=a.a.lazy(function(){return n.e(6).then(n.bind(null,141))}),Y=Object(c.b)(null,function(e){return{onCheckAuthentication:function(){return e(R.c())}}})(function(e){return Object(r.useEffect)(function(){e.onCheckAuthentication()},[]),a.a.createElement(u.a,null,a.a.createElement(N,null,a.a.createElement(a.a.Suspense,{fallback:a.a.createElement(G.a,null)},a.a.createElement(l.d,null,a.a.createElement(l.b,{path:"/",exact:!0,component:H}),a.a.createElement(l.b,{path:"/auth",render:function(e){return a.a.createElement(V,e)}}),a.a.createElement(l.b,{path:"/logout",component:Z}),a.a.createElement(l.b,{path:"/checkout",render:function(e){return a.a.createElement(J,e)}}),a.a.createElement(l.b,{path:"/orders",render:function(e){return a.a.createElement(Q,e)}}),a.a.createElement(l.a,{to:"/"})))))}),$=n(14),W=n(2),K=n(1),X={token:null,userId:null,loading:!1,error:null},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.c:return Object(W.a)({},e,{loading:!0});case K.d:return Object(W.a)({},e,{token:t.token,userId:t.userId,loading:!1,error:null});case K.a:return Object(W.a)({},e,{loading:!1,error:t.error});case K.b:return Object(W.a)({},e,{token:null,userId:null});default:return e}},te=n(22),ne={onion:.07,salami:.1,mushrooms:.08,olives:.09,basil:.09,pineapple:.1,redPepper:.07,greenPepper:.07},re={ingredients:null,startedPrice:14,ingSelected:!1,error:null},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.l:return Object(W.a)({},e,{ingredients:t.ingredients});case K.k:return Object(W.a)({},e,{error:t.error});case K.e:return Object(W.a)({},e,{ingredients:Object(W.a)({},e.ingredients,Object(te.a)({},t.ingType,{amount:t.value,price:t.value*ne[t.ingType]})),ingSelected:!0});case K.n:var n={};for(var r in e.ingredients)n[r]={amount:0,price:0};return Object(W.a)({},e,{ingredients:n,ingSelected:!1});case K.m:var a=[];for(var o in e.ingredients)a.push(o);for(var i=Math.floor(8*Math.random())+1,c={},u=function(e){var t=Math.floor(60*Math.random())+20,n=a[Math.floor(Math.random()*a.length)];c=Object(W.a)({},c,Object(te.a)({},n,{amount:t,price:t*ne[n]})),a=a.filter(function(e){return e!==n})},l=0;l<i;l++)u();return console.log(i),Object(W.a)({},e,{ingredients:Object(W.a)({},e.ingredients,c),ingSelected:!0});default:return e}},oe={orders:[],loading:!1,error:null,ordered:!1},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.p:return Object(W.a)({},e,{loading:!0});case K.q:return Object(W.a)({},e,{loading:!1,error:null,ordered:!0});case K.o:return Object(W.a)({},e,{loading:!1,error:t.error,ordered:!1});case K.i:return Object(W.a)({},e,{loading:!0});case K.j:return Object(W.a)({},e,{orders:t.orders,ordered:!1,loading:!1,error:null});case K.h:return Object(W.a)({},e,{ordered:!1,loading:!1,error:t.error});case K.g:return Object(W.a)({},e,{orders:e.orders.filter(function(e){return e.id!==t.id}),loading:!1,error:null});case K.f:return Object(W.a)({},e,{loading:!1,error:t.error});default:return e}},ce=Object($.c)({auth:ee,mp:ae,order:ie}),ue=n(68),le=$.d,se=Object($.e)(ce,le(Object($.a)(ue.a)));i.a.render(a.a.createElement(c.a,{store:se},a.a.createElement(Y,null)),document.getElementById("root"))}],[[72,2,3]]]);
//# sourceMappingURL=main.8ed4c07c.chunk.js.map